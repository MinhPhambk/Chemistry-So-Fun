@model List<string>
@{
    ViewData["Title"] = "Home Page";
}

<style>
    
    #carouselExampleControls .carousel-control-prev,
    #carouselExampleControls .carousel-control-next {
        opacity: 0;
        border: 0;
        transition: opacity 0.3s, border 0.3s;
    }

    #carouselExampleControls:hover .carousel-control-prev,
    #carouselExampleControls:hover .carousel-control-next {
        opacity: 1;
        border: 0;
    }


</style>

<!-- ***** Preloader Start ***** -->
<div id="preloader">
    <div class="jumper">
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<!-- ***** Preloader End ***** -->
<!-- ***** Header Area Start ***** -->
<br />
<br />
<br />
<br />
<br />
<header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="index.html" class="logo">
                        <img src="~/images/logo.png">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li class="scroll-to-section"><a href="@Url.Action("Index", "Home")">Trang chủ</a></li>
                        <li><a href="@Url.Action("Lab", "Home")">Phòng thí nghiệm</a></li>
                        <li><a href="@Url.Action("Theory", "Home")" class="active" style="color: #fff !important;">Lý thuyết</a></li>
                        <li><a href="@Url.Action("Quiz", "Home")">Trắc nghiệm</a></li>
                        <li><a href="@Url.Action("Video", "Home")">Hoá học kỳ diệu</a></li>
                    </ul>
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- ***** Header Area End ***** -->
<!-- ***** Theory Area Starts ***** -->

<section class="section" id="theory">
    <br>
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="section-heading">
                    <h2>Lý thuyết</h2>
                    <span>Cung cấp các thông tin hữu ích có thể bạn chưa biết về hoá học.</span>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="container">
        <div class="row blog">
            <div class="col-lg-12">
                <div id="topics" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators" id="slides">
                        <li data-target="#topics" data-slide-to="0" class="active"></li>
                        <li data-target="#topics" data-slide-to="1"></li>
                        <li data-target="#topics" data-slide-to="2"></li>
                    </ol>

                    <div class="carousel-inner" id="alltopics">
                        <div class="carousel-item active">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 1})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_1.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 1</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 2})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_2.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 2</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 3})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_3.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 3</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 4})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_4.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 4</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 5})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_5.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 5</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 6})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_6.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 6</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 7})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_7.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 7</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 8})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_8.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 8</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="card">
                                        <a href="@Url.Action("Theory", "Home", new {id = 9})">
                                            <img class="card-img-top img-fluid mx-auto d-block" src="~/images/topic_9.png"
                                                 alt="Image" style="max-width:100%;">
                                            <div class="card-body centered">
                                                <h5 class="card-text" style="color: #1f4e79; font-weight: 700;">Chủ đề 9</h5>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
</section>

@if (Model.Count == 0)
{
    <br />
    <br />
    <br />
}
else
{
    <br />
    <br />
    <section class="section" id="carouselPos">
        <br />
        <br />
        <br />
        <br />
        <div class="container">
            <div class="row">
                <div class="col">
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            @for (int i = 0; i < Model.Count; i++)
                            {
                                if (i == 0)
                                {
                                    <div class="carousel-item active">
                                        <img src="@Model[i]" class="d-block w-100" alt="...">
                                    </div>
                                }
                                else
                                {
                                    <div class="carousel-item">
                                        <img src="@Model[i]" class="d-block w-100" alt="...">
                                    </div>
                                }
                            }
                        </div>
                        <button class="carousel-control-prev" type="button" data-target="#carouselExampleControls" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-target="#carouselExampleControls" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
}
<!-- ***** Theory Area Ends ***** -->

<script type="module">

    $(document).ready(function () {
        /* show lightbox when clicking a thumbnail */
        $('a.thumb').click(function (event) {
            event.preventDefault();
            var content = $('.modal-body');
            content.empty();
            var title = $(this).attr("title");
            $('.modal-title').html(title);
            content.html($(this).html());
            $(".modal-profile").modal({ show: true });
        });

        $('#carouselExample').on('slide.bs.carousel', function (e) {
            var $e = $(e.relatedTarget);
            var idx = $e.index();
            var itemsPerSlide = 3;
            var totalItems = $('.carousel-item').length;

            if (idx >= totalItems - (itemsPerSlide - 1)) {
                var it = itemsPerSlide - (totalItems - idx);
                for (var i = 0; i < it; i++) {
                    if (e.direction == "left") {
                        $('.carousel-item').eq(i).appendTo('.carousel-inner');
                    }
                    else {
                        $('.carousel-item').eq(0).appendTo('.carousel-inner');
                    }
                }
            }
        });
    });

</script>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const carousel = document.getElementById('carouselExampleControls');
        const prevButton = document.querySelector('#carouselExampleControls .carousel-control-prev');
        const nextButton = document.querySelector('#carouselExampleControls .carousel-control-next');

        function hideButtonsTemporarily() {
            prevButton.style.opacity = '0';
            nextButton.style.opacity = '0';

            // Khôi phục lại trạng thái mặc định sau 1 giây
            setTimeout(() => {
                carousel.addEventListener('mouseenter', showButtons);
                carousel.addEventListener('mouseleave', hideButtons);
            }, 1000);
        }

        function showButtons() {
            prevButton.style.opacity = '1';
            nextButton.style.opacity = '1';
        }

        function hideButtons() {
            prevButton.style.opacity = '0';
            nextButton.style.opacity = '0';
        }

        prevButton.addEventListener('click', hideButtonsTemporarily);
        nextButton.addEventListener('click', hideButtonsTemporarily);
        carousel.addEventListener('mouseenter', showButtons);
        carousel.addEventListener('mouseleave', hideButtons);
    });

    window.addEventListener('load', () => {
        const topicElement = document.getElementById('carouselPos');
        if (topicElement) {
            topicElement.scrollIntoView({ behavior: 'smooth' });
        }
    });
</script>
